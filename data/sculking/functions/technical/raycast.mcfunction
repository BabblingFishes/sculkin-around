execute if entity @s[distance=..7] unless block ^ ^ ^ minecraft:lightning_rod positioned ^ ^ ^0.25 run function sculking:technical/raycast

execute if entity @s[distance=..7] if block ^ ^ ^ minecraft:lightning_rod align xyz if predicate sculking:portal_blank positioned ~0.5 ~0.5 ~0.5 unless entity @e[type=marker,distance=..1.5,tag=sculking.portal] run function sculking:technical/build_sculk_portal

#execute if entity @s[distance=..7] if block ^ ^ ^ minecraft:lightning_rod align xyz if block ~ ~-1 ~ minecraft:stone_brick_wall if block ~ ~-3 ~ minecraft:stone_brick_wall if block ~ ~-4 ~ minecraft:lightning_rod[facing=down] if block ~ ~-2 ~ minecraft:barrel{Items: [{Slot: 3b, id: "minecraft:amethyst_shard", Count: 1b}, {Slot: 4b, id: "minecraft:amethyst_shard", Count: 1b}, {Slot: 5b, id: "minecraft:amethyst_shard", Count: 1b}, {Slot: 9b, id: "minecraft:copper_ingot", Count: 1b}, {Slot: 10b, id: "minecraft:copper_ingot", Count: 1b}, {Slot: 11b, id: "minecraft:copper_ingot", Count: 1b}, {Slot: 12b, id: "minecraft:amethyst_shard", Count: 1b}, {Slot: 13b, id: "minecraft:sculk", Count: 64b}, {Slot: 14b, id: "minecraft:amethyst_shard", Count: 1b}, {Slot: 15b, id: "minecraft:copper_ingot", Count: 1b}, {Slot: 16b, id: "minecraft:copper_ingot", Count: 1b}, {Slot: 17b, id: "minecraft:copper_ingot", Count: 1b}, {Slot: 21b, id: "minecraft:amethyst_shard", Count: 1b}, {Slot: 22b, id: "minecraft:amethyst_shard", Count: 1b}, {Slot: 23b, id: "minecraft:amethyst_shard", Count: 1b}]} positioned ~0.5 ~0.5 ~0.5 unless entity @e[type=marker,distance=..1.5,tag=sculking.portal] run function sculking:technical/build_sculk_portal
